<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<title>Product Details</title>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link class="devex" rel="icon" href="/img/banner/title-icon.png" />
	<!-- Bootstrap CSS v5.2.1 -->

	<!-- Bootstrap CSS v5.2.1 -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

	<!--cnd fontawesome-->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
		integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
		crossorigin="anonymous" referrerpolicy="no-referrer" />
	<!-- Theme style -->

	<link rel="stylesheet" href="/admin/dist/css/productDetail.css" th:href="@{/admin/dist/css/productDetail.css}">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.6.1/font/bootstrap-icons.css">

	<!--slick-->
	<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css" />
	<!--angular-->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.3/angular.min.js"
		integrity="sha512-KZmyTq3PLx9EZl0RHShHQuXtrvdJ+m35tuOiwlcZfs/rE7NZv29ygNA8SFCkMXTnYZQK2OX0Gm2qKGfvWEtRXA=="
		crossorigin="anonymous" referrerpolicy="no-referrer"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.3/angular-route.js"></script>	
	<script th:src="@{/js/cart-ctrl.js}"></script>
	<style>
		/* CSS cho modal container */
		.modal {
			display: none;
			/* Ẩn modal ban đầu */
			position: fixed;
			top: 40%;
			left: 59%;
			transform: translate(-50%, -50%);
			width: 25%;
			/* Điều chỉnh kích thước modal theo nhu cầu */
			height: 190px;
			/* Điều chỉnh kích thước modal theo nhu cầu */
			background-color: white;
			border: 1px solid #ccc;
			box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);
			text-align: center;
			overflow: hidden;
			animation: slideUp 0.5s ease-in-out;
			/* Animation xuất hiện từ dưới lên */
		}

		/* CSS cho nút đóng modal */
		.close {
			position: absolute;
			top: 10px;
			right: 10px;
			cursor: pointer;
		}

		/* CSS cho iframe bên trong modal */
		.modal iframe {
			width: 100%;
			height: 100%;
			border: none;
		}

		/* Định nghĩa animation slideUp */
		@keyframes slideUp {
			0% {
				transform: translate(-50%, 100%);
			}

			100% {
				transform: translate(-50%, -50%);
			}
		}
	</style>
</head>

<body lang="en" th:object="${product}">
	<header>
		<div th:replace="~{flagment/user/userHeader :: userHeaderFragment}"></div>
		<div class="container  mt-3">
			<div class="row">
				<div class="col-12">
					<span class="content"><a class="path_content">Trang Chủ</a></span>
					<span class="path_arrow"> <i class="fa-solid fa-chevron-right"></i></span> <span class="content"><a
							class="path_content" th:text="*{productbrand.name}"></a></span> <span class="path_arrow"> <i
							class="fa-solid fa-chevron-right"></i>
					</span> <span class="content"><a class="path_content" th:text="*{name}"></a></span>
				</div>
			</div>
		</div>
	</header>
	<main th:object="${product}">

		<!-- duyện qua product trả về -->
		<div class="container container_main mt-4 ">
			<form th:action="@{'/cart/add/' + *{id}}" method="post">
				<div class="row   ">

					<!--main-left-->
					<div class=" col-12 col-lg-5 mt-3 slick-Slider-Syncing ">
						<!--slider-for-->
						<div class="slider-for">

							<div th:each="img: *{imageProducts}" class="image-item">

								<div class="image">

									<img th:src="@{|/img/product/${product.sellerProduct.username}/${product.id}/${img.name}|}"
										alt="null" />
								</div>

							</div>

						</div>

						<!--slider-nav-->
						<div class=" col-12 slick-slider_nav">
							<!-- Hiện Thị Hình Ảnh sản phẩm  -->
							<div class="image-slider">
								<div th:each="img: *{imageProducts}" style="padding-left: 5px;" class="image-item">
									<div class="image-nav">
										<img style="height: 70px; width: 100%;" class="slider_nav-img" tabindex="0"
											th:src="@{|/img/product/${product.sellerProduct.username}/${product.id}/${img.name}|}" />
									</div>

								</div>


							</div>

						</div>

					</div>
					<!--main-right-->
					<div class=" col-12 col-lg-7 mt-3">
						<!--Title-->
						<div class="row">
							<div class="col-12 title_product">
								<span th:id="*{id}" class="text_name-product" th:text="*{name}" id="orderInfo"
									name="orderInfo">
								</span>
								<!-- hiện thị tên sp -->
							</div>

						</div>
						<!--Evalue-->
						<div class="row d-none d-lg-flex" style="height: 20px;">
							<div class="col-3 evaluate d-flex  ">
								<div class>
									<span class="evaluate-text">4.7</span>
								</div>

								<div class="evaluate-star">
									<a class="icon-star text-center" style="text-decoration: none;">

										<i class="bi bi-star"></i> <i class="bi bi-star"></i> <i class="bi bi-star"></i>
										<i class="bi bi-star"></i> <i class="bi bi-star"></i>
									</a>
								</div>

							</div>
							<div class="col-3 evaluate d-flex  ">
								<div>
									<span class="evaluate-value text-dark "><a href="#">29,2K</a></span>
								</div>

								<div class="evaluate-content">
									<span class="evaluate-content_text ">Đánh Giá</span>
								</div>

							</div>

							<div class="col-3 d-flex">

								<div class="evaluate-sold ">
									<span class="evaluate-sold-value text-dark ">264,2K</span>
								</div>

								<div class="evaluate-sold-content ">
									<span class="evaluate-sold-content_text ps-2 ">Đã Bán</span>
								</div>

							</div>
							<div class="col-3">
								<div class="report float-end">
									<span><a class=" " href="#">Tố Cáo</a></span>
								</div>
							</div>
						</div>
						<!--price-->
						<div class="row mt-3  d-lg-flex align-items-center ">

							<div class=" col-2 d-none d-lg-flex">
								<span>Giá bán:</span>

							</div>

							<div class=" col-10">
								<span> <strong class="fs-3 fw-bold price totalPrice" id="amount" name="amount"
										style="color: #ee4d2d;"

										th:text="*{#numbers.formatDecimal(productVariants[0].priceSale, 0,'POINT',0,'POINT')}+' ₫'"></strong></span>
								<del class="fs-5 ms-3 opacity-50"
									th:text="*{#numbers.formatDecimal(productVariants[0].price, 0,'POINT',0,'POINT')}+' ₫'"></del>
							</div>
							<!--GIÁ TRƯỚC KHI GIẢM-->
							<div class="col-4"></div>

						</div>

						<!--Color-->
						<div class="row mt-3   ">
							<div class="row  d-none  d-lg-flex">
								<div class="col-12 col-lg-2">
									<span class="opacity-md-25 opacity-lg-100">Màu sắc: </span>
								</div>
								<div class="col-12 col-lg-10 d-flex">

									<div th:each="color, iter : ${listColor}"
										class="  form-check product-variation ms-1  align-items-center justify-content-center ">
										<input onchange="sendRadioValue(this.value) " th:value="${color}"
											th:attr="data-id=${product.id}" class="  form-check-input"
											style="margin-left: -1em !important; padding: 3px;" type="radio"
											name="flexRadioDefault" th:id="'flexRadioDefault'+${iter.count}"> <label
											class="form-check-label pe-1 " style="margin-left: 0.3rem; padding: 3px"
											th:for="'flexRadioDefault'+${iter.count}" th:text="${color}">
										</label>
									</div>
								</div>

							</div>

							<div th:if="*{#lists.size(productVariants[0].size)} > 0" id="size"
								class=" mt-2 d-none  d-lg-flex  justify-content-between ">
								<div class="col-12 col-lg-2">
									<span>Size: </span>
								</div>
								<div class="col-12 col-lg-10 d-flex">
									<div th:each="size, iter : ${listSize}"
										class="form-check product-variation ms-1  align-items-center justify-content-center ">
										<input class="  form-check-input" th:checked="${iter.index==0}"
											onchange="sendRadioValue(this.value)" th:value="${size}"
											style="margin-left: -1em !important; padding: 3px;" type="radio"
											name="flexRadio" th:id="'flexRadio'+${iter.count}"> <label
											class="form-check-label pe-1 " style="margin-left: 0.3rem; padding: 3px"
											th:for="'flexRadio'+${iter.count}" th:text="${size}">
										</label>
									</div>
								</div>
							</div>


						</div>
						<!--quantity-->
						<div class="row mt-3 d-none d-lg-flex justify-content-center align-items-center ">
							<div class="col-12 col-lg-2">
								<span>Số lượng: </span>
							</div>
							<div class="col-12 col-lg-10">
								<div id="number_quantity" class=" pe-none ">

									<div class="  control d-flex align-items-center ">

										<label id="btn_quantity" class="button  btn_Sub border-0 fs-3 "
											onclick="subtract(this)"> <i class="fa-solid fa-minus icon_Sub"></i>
										</label> <input oninput="updateTotalPrice(this)"
											class="text-center product_quantity " type="number" name="soluong"
											id="inputField" min="1" value="1" max="100"><br>
										<label id="btn_quantity" class="button btn_Add border-0 fs-4"
											onclick="add(this)"> <i class="fa-solid fa-plus icon_Add"></i>
										</label>
										<span style="margin-left: 50px;" id="totalquantity"></span>
									</div>
								</div>
							</div>
							

						</div>
						<!--total money-->


						<!--Purchase(mua)-->
						<!--Purchase(mua)-->
						<div id="addCart" class="row mt-3 d-none d-lg-flex pe-none ">
							<div class="col-7 col-lg-5">
								<button class="btn btn_buy" type="submit" name="action" value="addcart" onclick="show()">Thêm Vào Giỏ

									Hàng</button>
							</div>
							<div class="col-5 col-lg-4 mb-3">
								<button class="btn btn_buy" type="submit"name="action" value="order">
									<i class="fa-solid fa-cart-shopping" ></i> Đặt Hàng
								</button>
							</div>
							
						</div>

			</form>
			
		</div>
<!--
		<form th:action="@{/hihi}" method="get" style="position: absolute; margin-left: 300px;">
			<input type="text" class="form-control" id="orderInfo" name="orderInfo" required
				value="Thanh toan don hang 2923" style="display: none;">
			<input type="text" th:value="*{productVariants[0].priceSale}" id="amount" name="amount"
				style="display: none;" />



			</div>
		</form>-->
		<div class="col-3"></div>
		<hr>
		<!-- hết thẻ đặt hàng -->
		<!--List-favourite-->
		<div class="row mt-4">
			<div>
				<a href="#" class="btn border-0  list-favourite " aria-disabled="true" role="button">Thêm vào danh sách
					yêu tích</a>
			</div>

		</div>
		<!--share-->
		<div class="row mt-3 d-flex align-items-center" style="height: 40px;">
			<div class="col-12 col-lg-2">Chia sẻ:</div>
			<div class="col-12 col-lg-10 d-flex ">
				<div class="jssocials-share jssocials-share-email text-center   "
					style="width: 35px; height: 35px; background: #6594db;">
					<a class="link_share" href="#"><i class="jssocials-share-logo  fa-regular fa-envelope"></i></a>
				</div>
				<div class="jssocials-share jssocials-share-twitter text-center  "
					style="width: 35px; height: 35px; background-color: #1DA1F2;">
					<a class="link_share" href="#"><i class="jssocials-share-logo fa-brands fa-twitter"></i></a>
				</div>
				<div class="jssocials-share jssocials-share-facebook text-center  "
					style="width: 35px; height: 35px; background-color: #3B5998;">
					<a class="link_share" href="#"><i class="jssocials-share-logo fa-brands fa-facebook-f "></i></a>
				</div>
				<div class="jssocials-share jssocials-share-instagram text-center  "
					style="width: 35px; height: 35px; background-color: #a0ade2;">
					<a class="link_share" href="#"><i class="jssocials-share-logo fa-brands fa-instagram"></i></a>
				</div>
				<div class="jssocials-share jssocials-share-whatsapp text-center  "
					style="width: 35px; height: 35px; background-color: #25D366;">
					<a class="link_share" href="#"><i class="jssocials-share-logo fa-brands fa-whatsapp"></i></a>
				</div>

			</div>
		</div>

	</main>
	<div class="text-center">
		<button id="successbtn" hidden>Lưu</button>
		<button id="failsebtn" hidden>Xóa</button>
	</div>

	<div id="successModal" class="modal">
		<div class="modal-content">
			<span class="close">&times;</span>
			<iframe
				src="https://lottie.host/?file=b88a887a-bdb0-4353-9bf1-6fe27e3eb9f1/FboQjv554S.json"></iframe>
			<span id="content" class="text-success fs-3">Thêm thành công</span>
		</div>
	</div>

	<div id="failseModal" class="modal">
		<div class="modal-content">
			<span class="close">&times;</span>
			<iframe
				src="https://lottie.host/?file=51cd8b56-3c50-45f1-a51f-9e1ae1a50534/RwZN1jyiA0.json"></iframe>
			<span id="contentfalse" class="text-danger fs-3">Thêm thất bại</span>
		</div>
	</div>
	<!--shop name-->
	<div th:object="${seller}" class="container container-shop mt-3 ">
		<!-- sài chung cho toàn bộ trang -->
		<div class="row">
			<div class="col-12 col-lg-4">
				<div class="row d-flex justify-content-between ">
					<div class="col-3" style="padding: 0;">
						<div class="img_salles">
							<img class="img_salles-logo" th:src="@{|/img/account/*{sellerProduct.avatar}}" alt="">
						</div>
					</div>
					<div class="col-9 contact ">
						<div class="shop_name" th:text="*{sellerProduct.shopName}">

						</div>
						<div class="contact-content mt-2">
							<div class="row">
								<div class="col-6 d-none d-lg-flex">
									<button class="btn_chat">
										<div class="content_chat ">
											<i class="fs-6 fa-solid fa-message"></i> <span
												style="font-size: .875rem;">Chat ngay</span>
										</div>

									</button>
								</div>
								<div class="col-6 d-flex">
									<button class="float-end btn_seeShop">
										<div class="content_seeShop ">
											<i class="fs-6 fa-solid fa-shop"></i> <span style="font-size: .875rem;">Xem
												Shop</span>
										</div>

									</button>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="col-12 col-lg-8 d-flex d-lg-grid align-items-center">
				<div class="row">
					<div class="col-6 col-lg-4 d-flex justify-content-between">
						<label class="dis-shop">Đánh Giá:</label> <span
							class=" parameter-content text-danger">29,9k</span>
					</div>
					<div class="col-6 col-lg-4 d-flex justify-content-between">
						<label class="dis-shop">Phản Hồi Chat:</label> <span
							class=" parameter-content text-danger">29,9k</span>
					</div>
					<div class="col-4 d-none d-lg-flex justify-content-between">
						<label class="dis-shop ">Tham Gia:</label> <span class=" parameter-content text-danger"
							th:text="*{sellerProduct.createDay}">29,9k</span>
					</div>

				</div>
				<div class="row">
					<div class="col-6 col-lg-4 d-flex justify-content-between">
						<label class="dis-shop">Sản Phẩm:</label> <span class=" parameter-content text-danger"
							th:text="*{productVariants.size()}">29,9k</span>
					</div>
					<div class="col-4  d-none d-lg-flex justify-content-between">
						<label class="dis-shop">Thời Gian Phản Hồi:</label> <span
							class=" parameter-content text-danger">Trong vài giờ</span>
					</div>
					<div class="col-4 d-none d-lg-flex justify-content-between">
						<label class="dis-shop">Người Theo Dõi:</label> <span
							class=" parameter-content text-danger">29,9k</span>
					</div>

				</div>

			</div>
		</div>


	</div>
	<!--describe(mô tả)-->
	<div class="container container_describe mt-5 border border-1 " style="height: 100%; padding-bottom: 1.5rem;">
		<div class="row mt-3  mx-2 " style="height: 50px; background-color: rgb(153, 153, 153, 0.3);">

			<div class=" d-flex align-items-center mx-2">
				<h2 class="describe_content my-auto">MÔ TẢ SẢN PHẨM</h2>

			</div>

		</div>
		<div class="row mt-3 mx-3">
			<div class="">
				<pre th:text="*{description}">

                        </pre>
				<pre>
*Đổi trả theo đúng quy định của DEVEX online:
1. Điều kiện áp dụng (trong vòng 03 ngày kể từ khi nhận sản phẩm)
- Vui lòng quay video trước khi khui hàng
- Hàng hoá bị lỗi hoặc hư hỏng do vận chuyển hoặc do nhà sản xuất 
2. Trường hợp được chấp nhận: 
- Hàng không đúng chủng loại, mẫu mã như quý khách đặt hàng 
- Không đủ số lượng, không đủ bộ như trong đơn hàng                       
                        </pre>


			</div>
		</div>
	</div>
	<!--Đánh giá sp-->
	<div class="container d-none d-lg-grid container_evaluate_end  mt-4 border border-1" style="height: 500px;">
		<div class="row mt-3  mx-2 " style="height: 50px;">

			<div class=" d-flex align-items-center mx-2">
				<h2 class="describe_content my-auto">ĐÁNH GIÁ SẢN PHẨM</h2>

			</div>


		</div>

		<div class="row mx-4   border border-1   " style="padding: 30px;">
			<div class="col-2  text-center  flex-column ">
				<span class="fs-5 text-danger " style="font-weight: 350;"><strong class="fs-2">5</strong> trên 5</span>

				<div>
					<a class="icon-star text-center" style="text-decoration: none;">
						<i class="icon-flash text-red"></i> <i class="fa-solid fa-star fs-5 text-danger"></i> <i
							class="fa-solid fa-star fs-5 text-danger"></i> <i
							class="fa-solid fa-star fs-5 text-danger"></i> <i
							class="fa-solid fa-star fs-5 text-danger"></i> <i
							class="fa-solid fa-star fs-5 text-danger"></i>
					</a>
				</div>



			</div>
			<div class="col-10 d-flex  align-items-center ">

				<div class="row   ">
					<div class="col-2" style="width: 150px; height: 2rem;">
						<button class="btn-star" aria-label="Đen" aria-disabled="false">
							<span>Tất Cả</span>
						</button>
					</div>
					<div class="col-2" style="width: 150px; height: 2rem;">
						<button class="btn-star" aria-label="Đen" aria-disabled="false">
							<span>5 Sao(0)</span>
						</button>
					</div>
					<div class="col-2" style="width: 150px; height: 2rem;">
						<button class="btn-star" aria-label="Đen" aria-disabled="false">
							<span>4 Sao(0)</span>
						</button>
					</div>
					<div class="col-2" style="width: 150px; height: 2rem;">
						<button class="btn-star" aria-label="Đen" aria-disabled="false">
							<span>3 Sao(0)</span>
						</button>
					</div>
					<div class="col-2" style="width: 150px; height: 2rem;">
						<button class="btn-star" aria-label="Đen" aria-disabled="false">
							<span>2 Sao(0)</span>
						</button>
					</div>
					<div class="col-2" style="width: 150px; height: 2rem;">
						<button class="btn-star" aria-label="Đen" aria-disabled="false">
							<span>1 Sao(0)</span>
						</button>
					</div>




				</div>

			</div>


		</div>

		<div class="row mt-2 mx-4">
			<div class="col-1">
				<i class="fa-regular fa-user fs-3"></i>
			</div>
			<div class="col-11">
				<span>User</span>
				<div>
					<a class="icon-star text-center" style="text-decoration: none;">
						<i class="icon-flash text-red"></i> <i class="fa-solid fa-star text-danger"></i> <i
							class="fa-solid fa-star text-danger"></i> <i class="fa-solid fa-star text-danger"></i> <i
							class="fa-solid fa-star text-danger"></i> <i class="fa-solid fa-star text-danger"></i>
					</a>
				</div>
				<span>Thời gian: loại sp</span> <br> <span>Đánh giá: ok?
					!ok</span>
				<div class="feedback">
					<span>Phản Hồi Của người bán</span>
				</div>

			</div>
			<hr>
		</div>




	</div>
	<!-- Sản Phẩm của shop-->

	<div class="container container_main mt-3">
		<div class="row ">

			<div class="col-12 col-lg-7 text-dark content_price mt-2 ">CÁC SẢN PHẨM KHÁC CỦA SHOP</div>

		</div>

		<div class="row mt-2">
			<div class="col-12  ">
				<div class="card-slider d-flex justify-content-start"> <!-- slider sp của shop-->
					<div id="suggest_Shop" class="col-6 col-md-4 col-lg-3 col-xl-2 pt-2"
						th:each="shopProduct : ${shopProduct}">
						<a th:href="@{|/details/${shopProduct.id}|}" class="text-decoration-none">
							<div class="card m-2 pb-2">
								<div id="sale" class="icon-sale text-center pl-5 pr-5 p-1">HOT SALE</div>
								<div class="hot-sale text-center p-1"
									th:if="${#numbers.formatDecimal(100 - ((shopProduct.productVariants[0].priceSale / shopProduct.productVariants[0].price) * 100),0,'POINT', 0, 'COMMA')} > 0">
									Giảm
									<span
										th:text="${#numbers.formatDecimal(100 - ((shopProduct.productVariants[0].priceSale / shopProduct.productVariants[0].price) * 100),0,'POINT', 0, 'COMMA')}"></span> %
									
									</div>
									<img 
 									th:src="@{|/img/product/${shopProduct.sellerProduct.username}/${shopProduct.id}/${shopProduct.imageProducts[0].name}|}"
									class="img-fluid w-100 p-0"
									th:alt="${shopProduct.name}" />
									<div class="card-body" style="padding: 5px">
										<div
											class="card-title tensp text-left"
											style="height: 40px"
											th:text="${shopProduct.name}"
											th:title="${shopProduct.name}"></div>

										<div id="price-box" >
											<div class="price_suggest col-6  m-0" >
											<span style="color: #ff0821bb">₫</span><strong
												class="fs-10"

												th:text="${#numbers.formatDecimal(shopProduct.productVariants[0].priceSale, 0 , 'POINT', 0, 'COMMA')}"
												style="color: #ff0821bb; font-weight: 600">8,490,000</strong>
										</div>

										<div class=" col-6 ">
											<p class="text-info text-end buy m-0">
												đã bán <i class="text-info m-0"
													th:text="${shopProduct.soldCount}"></i>

											</p>
										</div>

									</div>

								</div>
							</div>

						</a>
					</div>

				</div>
			</div>
		</div>
	</div>
	<!--Gợi Ý Sản Phẩm-->
	<div class="container container_main mt-3">
		<div class="row ">

			<div class="col-12 col-lg-7 text-dark content_price mt-2 "> CÓ THỂ BẠN CŨNG THÍCH </div>

		</div>

		<div class="row mt-2">
			<div class="col-12  ">
				<div class="row">
					<div id="suggest" class="col-6 col-md-4 col-lg-3 col-xl-2 pt-2" th:each="products : ${products}">
						<a th:href="@{|/details/${products.id}|}" class="text-decoration-none">
							<div class="card pb-2">
								<div id="sale" class="icon-sale text-center pl-5 pr-5 p-1">HOT SALE</div>
								<div class="hot-sale text-center p-1"
									th:if="${#numbers.formatDecimal(100 - ((products.productVariants[0].priceSale / products.productVariants[0].price) * 100),0,'POINT', 0, 'COMMA')} > 0">
									Giảm
									<span
										th:text="${#numbers.formatDecimal(100 - ((products.productVariants[0].priceSale / products.productVariants[0].price) * 100),0,'POINT', 0, 'COMMA')}"></span> %
									</div>
									<img onload="lazy"
									th:src="@{|/img/product/${products.sellerProduct.username}/${products.id}/${products.imageProducts[0].name}|}"
									class="img-fluid w-100 p-0"
									th:alt="${products.name}" />
									<div class="card-body" style="padding: 5px">
										<div
											class="card-title tensp text-left"
											style="height: 40px"
											th:text="${products.name}"
											th:title="${products.name}"></div>

										<div id="price-box" >
											<div class="price_suggest col-6  m-0" >
											<span style="color: #ff0821bb">₫</span><strong
												class="fs-10"

												th:text="${#numbers.formatDecimal(products.productVariants[0].priceSale, 0 , 'POINT', 0, 'COMMA')}"
												style="color: #ff0821bb; font-weight: 600">8,490,000</strong>
										</div>

										<div class=" col-6 ">
											<p class="text-info text-end buy m-0">
												đã bán <i class="text-info m-0" th:text="${products.soldCount}"></i>

											</p>
										</div>

									</div>

								</div>
							</div>

						</a>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div id="model-container">
		<form th:action="@{'/cart/add/' + *{id}}">
			<div class="model bg-light" id="model-demo">
				<div id="model-header" style="padding: 5px;">
					<div class="row border-bottom border-bottom-1">
						<div class="col-5">
							<div class="model-header_image">
								<img class="img-fluid"
									th:src="@{|/img/product/${product.sellerProduct.username}/${product.id}/${product.imageProducts[0].name}|}"
									alt="null" />
							</div>
						</div>
						<div class="col-5 position-relative ">
							<div class="model-header_price position-absolute " style="bottom: 0;">

								<div class="model-header_price-real ">
									<span> <strong class="fs-6 fw-bold price_real" style="color: #ee4d2d;"
											th:text="*{#numbers.formatDecimal(productVariants[0].priceSale, 0,'COMMA',0,'POINT')}+'₫'"></strong></span>

									<del class="fs-6 ms-3 opacity-50"
										th:text="*{#numbers.formatDecimal(productVariants[0].price, 0,'COMMA',0,'POINT')}+'₫'"></del>

									<p class="text-info m-0">
										Tồn kho: <i class="text-info m-0"
											th:text="*{productVariants[0].quantity}">###</i>
									</p>
								</div>


							</div>
						</div>
						<div class="col-2">
							<div class="model-header_close">
								<label id="btn-close" class="float-end me-2 "><i class="fa-solid fa-xmark"></i></label>
							</div>
						</div>
					</div>

				</div>
				<!--model body-->
				<div class="model-body" style="padding: 5px;">
					<div class="row border-bottom border-bottom-1">
						<div class="col-12 col-lg-2">
							<span class="opacity-md-25 opacity-lg-100">Màu sắc: </span>
						</div>
						<div class="col-12 col-lg-10 d-flex my-2">

							<div th:each="color, iter : ${listColor}"
								class="form-check product-variation ms-1  align-items-center justify-content-center ">
								<input onchange="sendRadioValue(this.value) " th:value="${color}"
									th:attr="data-id=${product.id}" class="  form-check-input"
									style="margin-left: -1em !important; padding: 3px;" type="radio"
									name="flexRadioDefault" th:id="'flexRadioDefault'+${iter.count}">
								<label class="form-check-label pe-1 " style="margin-left: 0.3rem; padding: 3px"
									th:for="'flexRadioDefault'+${iter.count}" th:text="${color}">
								</label>

							</div>
						</div>

					</div>

					<div class="row border-bottom border-bottom-1 ">
						<div id="size" th:if="*{#lists.size(productVariants[0].size)} > 0"
							class="checkNull mt-2  d-flex flex-column justify-content-between ">
							<div class="col-12 col-lg-2">
								<span>Size: </span>
							</div>
							<div class=" col-12 col-lg-10 d-flex my-2">

								<div th:each="size, iter : ${listSize}"
									class="form-check product-variation ms-1  align-items-center justify-content-center ">
									<input class="  form-check-input" onchange="sendRadioValue(this.value)"
										th:value="${size}" style="margin-left: -1em !important; padding: 3px;"
										type="radio" name="flexRadio" th:id="'flexRadio'+${iter.count}">
									<label class="form-check-label pe-1 " style="margin-left: 0.3rem; padding: 3px"
										th:for="'flexRadio'+${iter.count}" th:text="${size}"> </label>
								</div>
							</div>
						</div>
					</div>
					<!--số lượng- mobile-->
					<div class="row mt-2 ">

						<div class="col-6 ">
							<span>Số lượng: </span>
						</div>
						<div class="col-6 ">
							<div id="number_quantity_mobile" class=" pe-none  float-end ">
								<div class="control d-flex align-items-center ">

									<label class="button btn_Sub border-0 fs-3 " onclick="subtract(this)"> <i
											class="fa-solid fa-minus icon_Sub"></i>
									</label> <input class="text-center product_quantity " type="number" name="soluong"
										id="inputField" min="1" value="1"><br>
									<label class="button btn_Add border-0 fs-4 " style="outline-style: none;"
										onclick="add(this)"> <i class="fa-solid fa-plus icon_Add"></i>
									</label>

								</div>
							</div>
						</div>


								<div class="control d-flex align-items-center ">

					</div>
				</div>
				<!--model footer-->
				<div class="model-footer">
					<div class="row d-flex justify-content-center">
						<!-- 					<a th:href="@{'/cart/add/' + *{id}}"> -->
						<button id="btn_add_buy" class="product-bottom-mobile_add-cart"

							style="background-color: #2550b9 !important;">
							<div class="content_Add-cart " style="line-height: 50px;">
								<span class="text-light" style="font-size: .875rem;">Thêm
									vào Giỏ hàng</span>
							</div>
						</button>
						<!-- 					</a> -->

					</div>
				</div>
			</div>
		</form>
	</div>

	<footer>

		<!--footer Mobile-->
		<div class="container-fluid d-inline-flex d-lg-none  ">
			<div class="row product-bottom  " style="width: 100%; position: fixed; bottom: 0; z-index: 10;">
				<div class="col-3 d-flex   align-items-center justify-content-center  p-0">
					<button class="product-bottom_chat  ">
						<i class="fs-6 mt-1 fa-regular fa-comment-dots"></i>
						<div class="content_chat ">
							<span class="text-light" style="font-size: .625rem;">Chat
								ngay</span>
						</div>

					</button>

					<div class="product-bottom-panel__separator ">
						<div class="product-bottom-panel__separator-real"></div>
					</div>
				</div>
				<div class="col-3 d-flex flex-column  align-items-center justify-content-center p-0 bg-info">
					<button id="btn_add_cart" class="product-bottom_add-cart">
						<!-- <i class="  fa-solid fa-cart-shopping"></i> -->
						<i class="fs-6 mt-1 fa-solid fa-cart-plus"></i>
						<div class="content_Add-cart ">

							<span class="text-light" style="font-size: .625rem;">Thêm
								vào Giỏ hàng</span>
						</div>
					</button>

				</div>
				<div class="col-6 d-flex justify-content-center align-items-center p-0  bg-danger">
					<button id="btn_buy-mobile" class="product-bottom_buy"
						style="background-color: #2550b9 !important;">
						<div class="content_buy">
							<span id="text_add_buy" class="text-light" style="font-size: .875rem;">Mua ngay</span>
						</div>
					</button>
				</div>
				
			</div>
		</div>
		<!-- place footer here -->
		<div th:replace="~{flagment/user/userFooter :: userFooterFragment}"></div>

	</footer>

	<!-- Bootstrap JavaScript Libraries -->
	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
		integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous">

		</script>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.min.js"
		integrity="sha384-7VPbUDkoPSGFnVtYi0QogXtr74QeVeeIs99Qfg5YCF+TidwNdjvaKZX19NZ/e6oz" crossorigin="anonymous">

		</script>
	<!--slick slide-->
	<script>
				// Khai báo một biến toàn cục để lưu giá bán đầu
				var quantityproductvariant;
				var originalPrice;
				var isDesktop = window.matchMedia("(min-width: 768px)");

				function updateTotalPrice (input) {
				// Lấy phần tử span chứa giá tiền
				var span = document.querySelector (".price");
				// Kiểm tra nếu biến originalPrice chưa được gán
				if (!originalPrice) {
					// Lấy nội dung của span, đó chính là giá bán đầu của sản phẩm
					var price = span.textContent;
					// Xóa ký tự VNĐ và dấu phẩy khỏi nội dung
					price = price.replace(/\.|\,|₫/g, "");
					// Chuyển giá trị của nội dung thành số
					price = parseInt(price);
					// Gán giá trị cho biến originalPrice
					originalPrice = price;
				}
				// Lấy input chứa số lượng
				var quantity = parseInt (input.value);
				console.log (quantity);
				// Tính tổng tiền bằng cách nhân giá bán đầu với số lượng
				var total = originalPrice * quantity;
				// Định dạng tổng tiền theo định dạng VNĐ
				var formatter = new Intl.NumberFormat ("vi-VN", {
					style: "currency",
					currency: "VND",
					currencyDisplay: "symbol",
				});
				if(isDesktop.matches){
				// Lấy phần tử span chứa tổng tiền
				var span = document.querySelector(".totalPrice");
				// Cập nhật nội dung của span bằng tổng tiền đã định dạng
				span.textContent = formatter.format(total);	
				}
				}

		function subtract(button) {
			var input = button.parentNode.querySelector(".product_quantity");
			var currentValue = parseInt(input.value);
			if (currentValue > 1) {
				input.value = currentValue - 1;
				input.dispatchEvent(new Event("input"));
			}
		}

		function add(button) {
			var input = button.parentNode.querySelector(".product_quantity");
			var currentValue = parseInt(input.value);
			if(currentValue < quantityproductvariant){
				input.value = currentValue + 1;
				input.dispatchEvent(new Event("input"));
			}
		}


	</script>


	<script>
		const btn_add_cart = document.getElementById('btn_add_cart')
		const btn_close = document.getElementById('btn-close')

		const btn_buy = document.getElementById('btn_buy-mobile');
		const model_container = document.getElementById('model-container')

		const btn_add_buy = document.getElementById('btn_add_buy');

		btn_add_cart.addEventListener('click', () => {
			model_container.classList.add('show');
			btn_add_buy.innerHTML = 'Thêm vào Giỏ hàng';
		});

		btn_buy.addEventListener('click', () => {
			model_container.classList.add('show');
			btn_add_buy.innerHTML = 'Mua ngay';
		})
		btn_close.addEventListener('click', () => {
			model_container.classList.remove('show');
		});
	</script>



	<script>
		// Sử dụng JavaScript để thay đổi lịch sử duyệt web và điều hướng về trang chủ
		function addToCartAndNavigateHome() {
			// Thực hiện thêm sản phẩm vào giỏ hàng

			// Thay đổi lịch sử duyệt web để ghi đè trang hiện tại
			// và điều hướng trình duyệt về trang chủ
			history.replaceState({}, '', '/home'); // Điều hướng về trang chủ
		}


		var setNumber =  document.getElementById('inputField');
		var setLabel = document.getElementById('btn_quantity');
		const quantity = document.getElementById('number_quantity');
		const quantity_mobile = document.getElementById('number_quantity_mobile');
		const size = document.getElementById('size');
		const addCart = document.getElementById('addCart');

		function sendRadioValue(value) {
			// lấy giá trị của color
			var color = document.querySelector("input[name='flexRadioDefault']:checked").value;
			// lấy giá trị của size

			var size = "";
			// kiểm tra nếu size không tồn tại 

			// kiểm tra nếu có radio được checked
			if (document.querySelector("input[name='flexRadio']:checked")) {
				//   gán giá trị của radio cho size
				size = document.querySelector("input[name='flexRadio']:checked").value;


			}

			if (size) {
				if (document.querySelector("input[name='flexRadioDefault']:checked") && document.querySelector("input[name='flexRadio']:checked")) {
					quantity.classList.remove("pe-none");
					quantity_mobile.classList.remove("pe-none");
					addCart.classList.remove("pe-none");
				}
			} else {
				if (color != null) {
					quantity.classList.remove("pe-none");
					quantity_mobile.classList.remove("pe-none");
					addCart.classList.remove("pe-none");
				}
			}

		 // check null color vs size
		 if(document.querySelector("input[name='flexRadioDefault']:checked") || document.querySelector("input[name='flexRadio']:checked")){
			// Lấy input chứa số lượng
			setNumber.value = 1;
		 }
		// var size =document.querySelector("input[name='flexRadio']:checked").value;
		
		var id = document.querySelector("input[name='flexRadioDefault']:checked").dataset.id;
		// hoặc tạo một chuỗi query chứa color và size
		var data = "id="+ id +"&color=" + color + "&size=" + size;
		var totalquantity = document.getElementById("totalquantity");
		 console.log(id,color, size);
		$.ajax({
			url: "/data", // url của server
			type: "POST", // phương thức gửi request
			data: data, // dữ liệu gửi lên server 
			success: function (price){
				console.log(price);
				let formatter = new Intl.NumberFormat('vi-VN', {
				    style: 'currency',
				    currency: 'VND',
				  });
				  // sử dụng phương thức format để định dạng giá tiền
				  let formattedPrice = formatter.format(price); // "123.456.789 ₫"
				  if(isDesktop.matches){
					$(".price").text(formattedPrice); // giá bán mới
				  }
				  $(".price_real").text(formattedPrice); // giá bán mới
				//   $("del").hide();
			}
			
			
		});
		$.ajax({
			url: "/quantityproductvariant", // url của server
			type: "POST", // phương thức gửi request
			data: data, // dữ liệu gửi lên server 
			success: function (quantity){
				quantityproductvariant = quantity;
				totalquantity.textContent = "Số lượng kho: " + quantityproductvariant;
				totalquantity.className = "text-danger";
				if(quantityproductvariant == 0){
					addCart.classList.add("pe-none");
				}
			}
		});
		// console.log(color);
		// fetch('/quantityproductvariant?id=' + id + '&color=' + color + '&size=' + size)
		// 		.then(response => response.json())
		// 		.then(quantity => {
		// 			// Cập nhật dữ liệu cho biểu đồ
		// 			quantityproductvariant = quantity;
		// 			console.log(quantityproductvariant);
		// 		});

		}



	</script>

	<script>
		var spanElement = document.getElementById("amount");
		var spanText = spanElement.textContent;
		$.ajax({
			type: "POST", // Hoặc "GET" tùy vào yêu cầu của bạn
			url: "/submitOrder", // Đường dẫn đến phương thức trong Controller
			data: {spanValue: spanText}, // Dữ liệu bạn muốn gửi đến Controller
			success: function (response) {
				// Xử lý kết quả từ Controller (nếu cần)
				console.log(response);
			},
			error: function (error) {
				// Xử lý lỗi (nếu có)
				console.error(error);
			}
		});
	</script>

	<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
	<script type="text/javascript" src="https://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
	<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
	<script src="/admin/dist/js/user/productDetail.js"></script>

	<script>
		document.addEventListener('DOMContentLoaded', function () {
			var successbtn = document.getElementById('successbtn');
			var failsebtn = document.getElementById('failsebtn');
			var successModal = document.getElementById('successModal');
			var failseModal = document.getElementById('failseModal');
			var closeButtons = document.getElementsByClassName('close');

			successbtn.addEventListener('click', function () {
				successModal.style.display = 'block';
			});

			failsebtn.addEventListener('click', function () {
				failseModal.style.display = 'block';
			});

			for (var i = 0; i < closeButtons.length; i++) {
				closeButtons[i].addEventListener('click', function () {
					successModal.style.display = 'none';
					failseModal.style.display = 'none';
				});
			}

			window.addEventListener('click', function (event) {
				if (event.target === greenModal || event.target === failseModal) {
					successModal.style.display = 'none';
					failseModal.style.display = 'none';
				}
			});
		});

		function show() {
			successbtn.click();
		}
	</script>

</body>

</html>